# StoryWorld – Replit (Python 3.10)
entrypoint = "main.py"
language = "python3"

# Python 3.10 for mediapipe 0.10.9 compatibility
modules = ["python-3.10"]

# Install deps on boot (use requirements-replit.txt – no CLIP git clone)
onBoot = "pip install -r requirements-replit.txt"

# Run FastAPI (local: 8000, deploy: uses PORT from Cloud Run)
run = "bash run_replit.sh"

# Deployment – lighter deps avoid build timeout/failure
[deployment]
build = "pip install -r requirements-replit.txt"
run = ["bash", "run_replit.sh"]
ignorePorts = true

[nix]
channel = "stable-23_11"
