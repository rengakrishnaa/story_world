# StoryWorld Frontend on Netlify
# Replace YOUR_REPLIT_URL with your Replit deploy URL (e.g. https://storyworld-xxx.yourusername.repl.co)

[build]
  publish = "."
  command = "true"
  # requirements.txt is empty (comments only) - pip installs nothing, succeeds

# Serve static frontend (index at /)
[[redirects]]
  from = "/"
  to = "/static/index.html"
  status = 200

[[redirects]]
  from = "/new.html"
  to = "/static/new.html"
  status = 200

[[redirects]]
  from = "/simulation.html"
  to = "/static/simulation.html"
  status = 200

# Proxy API calls to backend
[[redirects]]
  from = "/health"
  to = "https://YOUR_REPLIT_URL/health"
  status = 200
  force = true

[[redirects]]
  from = "/episodes"
  to = "https://YOUR_REPLIT_URL/episodes"
  status = 200
  force = true

[[redirects]]
  from = "/episodes/*"
  to = "https://YOUR_REPLIT_URL/episodes/:splat"
  status = 200
  force = true

[[redirects]]
  from = "/simulate"
  to = "https://YOUR_REPLIT_URL/simulate"
  status = 200
  force = true

[[redirects]]
  from = "/world-state/*"
  to = "https://YOUR_REPLIT_URL/world-state/:splat"
  status = 200
  force = true

[[redirects]]
  from = "/phase-status"
  to = "https://YOUR_REPLIT_URL/phase-status"
  status = 200
  force = true

[[redirects]]
  from = "/diagnostics/*"
  to = "https://YOUR_REPLIT_URL/diagnostics/:splat"
  status = 200
  force = true

[[redirects]]
  from = "/debug/*"
  to = "https://YOUR_REPLIT_URL/debug/:splat"
  status = 200
  force = true

[[redirects]]
  from = "/docs"
  to = "https://YOUR_REPLIT_URL/docs"
  status = 200
  force = true

[[redirects]]
  from = "/openapi.json"
  to = "https://YOUR_REPLIT_URL/openapi.json"
  status = 200
  force = true
