# StoryWorld Frontend on Netlify
# 1. Replace meiengine-8aooub3ij-krishnaas-projects-ee8b74e8.vercel.app with your Render service URL (e.g. https://storyworld-api.onrender.com)
# 2. Deploy: Netlify connects to GitHub, builds, publishes

[build]
  publish = "."
  command = "true"
  # Static site only - skip Python/pip (requirements.txt is for Vercel API)
  install = "true"

# Serve static frontend (index at /)
[[redirects]]
  from = "/"
  to = "/static/index.html"
  status = 200

[[redirects]]
  from = "/new.html"
  to = "/static/new.html"
  status = 200

[[redirects]]
  from = "/simulation.html"
  to = "/static/simulation.html"
  status = 200

# Proxy API calls to backend (Vercel or Render - replace meiengine-8aooub3ij-krishnaas-projects-ee8b74e8.vercel.app with your API URL)
[[redirects]]
  from = "/episodes"
  to = "https://meiengine-8aooub3ij-krishnaas-projects-ee8b74e8.vercel.app/episodes"
  status = 200
  force = true

[[redirects]]
  from = "/episodes/*"
  to = "https://meiengine-8aooub3ij-krishnaas-projects-ee8b74e8.vercel.app/episodes/:splat"
  status = 200
  force = true

[[redirects]]
  from = "/simulate"
  to = "https://meiengine-8aooub3ij-krishnaas-projects-ee8b74e8.vercel.app/simulate"
  status = 200
  force = true

[[redirects]]
  from = "/world-state/*"
  to = "https://meiengine-8aooub3ij-krishnaas-projects-ee8b74e8.vercel.app/world-state/:splat"
  status = 200
  force = true

[[redirects]]
  from = "/phase-status"
  to = "https://meiengine-8aooub3ij-krishnaas-projects-ee8b74e8.vercel.app/phase-status"
  status = 200
  force = true

[[redirects]]
  from = "/diagnostics/*"
  to = "https://meiengine-8aooub3ij-krishnaas-projects-ee8b74e8.vercel.app/diagnostics/:splat"
  status = 200
  force = true

[[redirects]]
  from = "/debug/*"
  to = "https://meiengine-8aooub3ij-krishnaas-projects-ee8b74e8.vercel.app/debug/:splat"
  status = 200
  force = true

[[redirects]]
  from = "/docs"
  to = "https://meiengine-8aooub3ij-krishnaas-projects-ee8b74e8.vercel.app/docs"
  status = 200
  force = true

[[redirects]]
  from = "/openapi.json"
  to = "https://meiengine-8aooub3ij-krishnaas-projects-ee8b74e8.vercel.app/openapi.json"
  status = 200
  force = true
