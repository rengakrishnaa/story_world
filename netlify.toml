# StoryWorld Frontend on Netlify
# FOR FUTURE DEPLOYMENT â€” Current setup: run uvicorn locally, no Netlify needed
# When deployed: Backend API at Render/Fly; Netlify proxies to it

[build]
  publish = "."
  command = "true"

# Serve static frontend (index at /)
[[redirects]]
  from = "/"
  to = "/static/index.html"
  status = 200

[[redirects]]
  from = "/new.html"
  to = "/static/new.html"
  status = 200

[[redirects]]
  from = "/simulation.html"
  to = "/static/simulation.html"
  status = 200

# Proxy API calls to Render backend
[[redirects]]
  from = "/health"
  to = "https://storyworld-api.onrender.com/health"
  status = 200
  force = true

[[redirects]]
  from = "/episodes"
  to = "https://storyworld-api.onrender.com/episodes"
  status = 200
  force = true

[[redirects]]
  from = "/episodes/*"
  to = "https://storyworld-api.onrender.com/episodes/:splat"
  status = 200
  force = true

[[redirects]]
  from = "/simulate"
  to = "https://storyworld-api.onrender.com/simulate"
  status = 200
  force = true

[[redirects]]
  from = "/world-state/*"
  to = "https://storyworld-api.onrender.com/world-state/:splat"
  status = 200
  force = true

[[redirects]]
  from = "/phase-status"
  to = "https://storyworld-api.onrender.com/phase-status"
  status = 200
  force = true

[[redirects]]
  from = "/internal/*"
  to = "https://storyworld-api.onrender.com/internal/:splat"
  status = 200
  force = true

[[redirects]]
  from = "/diagnostics/*"
  to = "https://storyworld-api.onrender.com/diagnostics/:splat"
  status = 200
  force = true

[[redirects]]
  from = "/debug/*"
  to = "https://storyworld-api.onrender.com/debug/:splat"
  status = 200
  force = true

[[redirects]]
  from = "/docs"
  to = "https://storyworld-api.onrender.com/docs"
  status = 200
  force = true

[[redirects]]
  from = "/openapi.json"
  to = "https://storyworld-api.onrender.com/openapi.json"
  status = 200
  force = true
